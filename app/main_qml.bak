// main.qml
import QtQuick 2.15
import QtQuick.Controls 2.15
import QtQuick.Layouts 1.15

ApplicationWindow {
    id: root
    width: 400
    height: 720
    visible: true
    title: "RTS RapidRide"

    // Persistent drawer
    Drawer {
        id: navDrawer
        width: parent.width * 0.75
        height: parent.height
        edge: Qt.LeftEdge
        modal: true

        ColumnLayout {
            anchors.fill: parent
            spacing: 12

            Label {
                text: "Menu"
                font.pixelSize: 20
                font.bold: true
                color: "white"
            }

            Button { text: "Home"; onClicked: loadPage("home.qml") }
            Button { text: "Routes"; onClicked: loadPage("routes.qml") }
            Button { text: "Tickets"; onClicked: loadPage("purchasing.qml") }
            Button { text: "Wallet"; onClicked: loadPage("wallet.qml") }
            Button { text: "Settings"; onClicked: loadPage("settings.qml") }
            Button { text: "Logout"; onClicked: loadPage("login.qml") }
        }
    }

    // Top bar with hamburger icon
    ToolBar {
        id: topBar
        width: parent.width
        height: 50

        RowLayout {
            anchors.fill: parent

            ToolButton {
                text: "\u2261"
                font.pixelSize: 24
                onClicked: navDrawer.open()
            }

            Label {
                text: "RapidRide"
                font.pixelSize: 20
                Layout.alignment: Qt.AlignVCenter
            }
        }
    }

    // Main loader for swapping content
    Loader {
        id: pageLoader
        objectName: "pageLoader"
        anchors {
            top: topBar.bottom
            left: parent.left
            right: parent.right
            bottom: parent.bottom
        }
        source: "home.qml"
    }

    function loadPage(pageUrl) {
        navDrawer.close()
        pageLoader.source = pageUrl
    }

    onClosing: Qt.quit()
}

